dist: trusty
sudo: false


language: python


branches:
  only:
    - master


install:
  - ./bin/travis/install


services:
  - mysql


matrix:
  include:
    - python: 3.7
      env: TOXENV=flake8
    - python: 3.7
      env: TOXENV=mypy
    # - python: 3.6
    #   env: TOXENV=docs
    - python: 3.6
      env: TOXENV=coverage-py36,codecov
    - python: 3.7
      env: TOXENV=coverage-py37,codecov

  allow_failures:
    # Needs work
    - env: TOXENV=docs


script:
  - ./bin/travis/run tox
